<Window x:Class="StudyDashboard.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:StudyDashboard"
        Title="Study Dashboard" 
        Height="900" Width="1400"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="#C0000000"
        ResizeMode="CanResizeWithGrip">
    
    <Border x:Name="MainBorder" BorderBrush="#60FFFFFF" BorderThickness="1" CornerRadius="5">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- ã‚¿ã‚¤ãƒˆãƒ«ãƒãƒ¼ -->
            <Grid Grid.Row="0" x:Name="TitleBarGrid" Background="#60000000" Height="35">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <!-- ãƒ‰ãƒ©ãƒƒã‚°å¯èƒ½ã‚¨ãƒªã‚¢ -->
                <Border Grid.Column="1" Background="Transparent" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown"/>
                
                <!-- ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãƒãƒ¼ -->
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <Menu x:Name="MainMenu" Background="Transparent">
                        <MenuItem Header="Dashboard" x:Name="MenuDashboard" Foreground="White">
                            <MenuItem Header="ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé…ç½®" Click="DefaultLayout_Click"/>
                            <MenuItem Header="é…ç½®ã‚’ãƒªã‚»ãƒƒãƒˆ" Click="ResetLayout_Click"/>
                        </MenuItem>
                        <MenuItem Header="Edit Layout" x:Name="MenuEditLayout" Foreground="White">
                            <MenuItem Header="å…¨ã¦è¡¨ç¤º" Click="ShowAll_Click"/>
                            <MenuItem Header="ã‚¿ã‚¤ãƒžãƒ¼ã®ã¿" Click="ShowTimerOnly_Click"/>
                            <MenuItem Header="çµ±è¨ˆã®ã¿" Click="ShowStatsOnly_Click"/>
                        </MenuItem>
                    </Menu>
                    
                    <!-- ãƒ€ãƒ¼ã‚¯/ãƒ©ã‚¤ãƒˆãƒ¢ãƒ¼ãƒ‰åˆ‡æ›¿ -->
                    <StackPanel Orientation="Horizontal" Margin="20,0,0,0" VerticalAlignment="Center">
                        <TextBlock x:Name="MoonIcon" Text="ðŸŒ™" Foreground="White" VerticalAlignment="Center" Margin="0,0,5,0"/>
                        <ToggleButton x:Name="ThemeToggle" Width="40" Height="20" 
                                     Background="#40FFFFFF" BorderThickness="0"
                                     Click="ThemeToggle_Click"/>
                        <TextBlock x:Name="SunIcon" Text="â˜€ï¸" Foreground="White" VerticalAlignment="Center" Margin="5,0,0,0"/>
                    </StackPanel>
                </StackPanel>
                
                <!-- ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« -->
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button x:Name="MinBtn" Content="âˆ’" Width="30" Height="25" Background="Transparent" Foreground="White" 
                           BorderThickness="0" Click="MinimizeButton_Click"/>
                    <Button x:Name="MaxBtn" Content="â–¡" Width="30" Height="25" Background="Transparent" Foreground="White" 
                           BorderThickness="0" Click="MaximizeButton_Click"/>
                    <Button Content="Ã—" Width="30" Height="25" Background="#80FF0000" Foreground="White" 
                           BorderThickness="0" Click="CloseButton_Click"/>
                </StackPanel>
            </Grid>
            
            <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ - Grid ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ -->
            <Grid Grid.Row="1" Margin="10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" MinWidth="300"/>
                    <ColumnDefinition Width="1.3*" MinWidth="400"/>
                    <ColumnDefinition Width="*" MinWidth="280"/>
                </Grid.ColumnDefinitions>
                <Grid.RowDefinitions>
                    <RowDefinition Height="*"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <!-- å·¦åˆ—: Timer + Visualizer -->
                <Grid Grid.Column="0" Grid.Row="0" Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    
                    <local:FocusTimerWidget x:Name="FocusTimer" Grid.Row="0" MinHeight="450"/>
                    <local:AudioVisualizerWidget x:Name="AudioVisualizer" Grid.Row="1" MinHeight="280"/>
                </Grid>
                
                <!-- ä¸­å¤®åˆ—: Session Stats -->
                <local:SessionStatsWidget x:Name="SessionStats" Grid.Column="1" Grid.Row="0" Margin="5"/>
                
                <!-- å³åˆ—: Sound Player + Tasks -->
                <Grid Grid.Column="2" Grid.Row="0" Margin="5">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    
                    <local:SoundPlayerWidget x:Name="SoundPlayer" Grid.Row="0" MinHeight="350"/>
                    <local:TasksWidget x:Name="TodaysTasks" Grid.Row="1" MinHeight="200"/>
                </Grid>
                
                <!-- ä¸‹éƒ¨: System Status -->
                <local:SystemStatusWidget x:Name="SystemStatus" Grid.Column="0" Grid.ColumnSpan="3" Grid.Row="1" 
                                         Margin="5" Height="70"/>
            </Grid>
        </Grid>
    </Border>
</Window>
