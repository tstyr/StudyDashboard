<Window x:Class="StudyDashboard.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:local="clr-namespace:StudyDashboard"
        Title="Study Dashboard" 
        Height="900" Width="1400"
        WindowStyle="None"
        AllowsTransparency="True"
        Background="#C0000000"
        ResizeMode="CanResizeWithGrip">
    
    <Border x:Name="MainBorder" BorderBrush="#60FFFFFF" BorderThickness="1" CornerRadius="5">
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>
            
            <!-- ã‚¿ã‚¤ãƒˆãƒ«ãƒãƒ¼ -->
            <Grid Grid.Row="0" x:Name="TitleBarGrid" Background="#60000000" Height="35">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                
                <Border Grid.Column="1" Background="Transparent" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown"/>
                
                <StackPanel Grid.Column="0" Orientation="Horizontal">
                    <Menu x:Name="MainMenu" Background="Transparent">
                        <MenuItem Header="Dashboard" x:Name="MenuDashboard" Foreground="White">
                            <MenuItem Header="ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé…ç½®" Click="DefaultLayout_Click"/>
                            <MenuItem Header="é…ç½®ã‚’ãƒªã‚»ãƒƒãƒˆ" Click="ResetLayout_Click"/>
                        </MenuItem>
                        <MenuItem Header="Edit Layout" x:Name="MenuEditLayout" Foreground="White">
                            <MenuItem Header="å…¨ã¦è¡¨ç¤º" Click="ShowAll_Click"/>
                            <MenuItem Header="ã‚¿ã‚¤ãƒžãƒ¼ã®ã¿" Click="ShowTimerOnly_Click"/>
                            <MenuItem Header="çµ±è¨ˆã®ã¿" Click="ShowStatsOnly_Click"/>
                        </MenuItem>
                    </Menu>
                    
                    <StackPanel Orientation="Horizontal" Margin="20,0,0,0" VerticalAlignment="Center">
                        <TextBlock x:Name="MoonIcon" Text="ðŸŒ™" Foreground="White" VerticalAlignment="Center" Margin="0,0,5,0"/>
                        <ToggleButton x:Name="ThemeToggle" Width="40" Height="20" 
                                     Background="#40FFFFFF" BorderThickness="0"
                                     Click="ThemeToggle_Click"/>
                        <TextBlock x:Name="SunIcon" Text="â˜€ï¸" Foreground="White" VerticalAlignment="Center" Margin="5,0,0,0"/>
                    </StackPanel>
                </StackPanel>
                
                <StackPanel Grid.Column="2" Orientation="Horizontal">
                    <Button x:Name="MinBtn" Content="âˆ’" Width="30" Height="25" Background="Transparent" Foreground="White" 
                           BorderThickness="0" Click="MinimizeButton_Click"/>
                    <Button x:Name="MaxBtn" Content="â–¡" Width="30" Height="25" Background="Transparent" Foreground="White" 
                           BorderThickness="0" Click="MaximizeButton_Click"/>
                    <Button Content="Ã—" Width="30" Height="25" Background="#80FF0000" Foreground="White" 
                           BorderThickness="0" Click="CloseButton_Click"/>
                </StackPanel>
            </Grid>
            
            <!-- ãƒ•ãƒªãƒ¼ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆï¼ˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãªã—ã€ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆå†…ã§ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼‰ -->
            <Canvas x:Name="WidgetCanvas" Grid.Row="1" Margin="5" ClipToBounds="True" Background="Transparent">
                <local:FocusTimerWidget x:Name="FocusTimer" Width="380" Height="440"/>
                <local:AudioVisualizerWidget x:Name="AudioVisualizer" Width="380" Height="300"/>
                <local:SessionStatsWidget x:Name="SessionStats" Width="520" Height="750"/>
                <local:SoundPlayerWidget x:Name="SoundPlayer" Width="380" Height="520"/>
                <local:TasksWidget x:Name="TodaysTasks" Width="380" Height="220"/>
                <local:SystemStatusWidget x:Name="SystemStatus" Width="1360" Height="60"/>
            </Canvas>
        </Grid>
    </Border>
</Window>
